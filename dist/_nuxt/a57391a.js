(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{713:function(t,e,n){"use strict";n.r(e);var r=n(33),l=(n(105),n(85),n(485),n(19),n(67),n(70),n(7),{data:function(){return{dates:[],menu:!1,filterFormModel:!1,search:"",headers:[{text:"المعرف",value:"idCourse",sortable:!1,align:"start",width:150},{text:"الصورة",value:"coursePath",sortable:!1,align:"start",width:150},{text:"عنوان الكورس",value:"courseTitle",sortable:!1,align:"start",width:150},{text:"وصف الكورس",value:"courseDescription",sortable:!1,align:"start",width:150},{text:"سعر الكورس",value:"coursePrice",sortable:!1,align:"start",width:150},{text:"المادة",value:"subject.subjectName",sortable:!1,align:"start",width:150},{text:"الصف",value:"class.className",sortable:!1,align:"start",width:200},{text:"التقيم",value:"courseRate",sortable:!1,align:"start",width:150},{text:"سعر المنصة",value:"platformPrice",sortable:!1,align:"start",width:150},{text:"السعر الكلي",value:"totalPrice",sortable:!1,align:"start",width:150},{text:"السعر المتبقي",value:"remainingPrice",sortable:!1,align:"start",width:150}],financialDetails:[],subjects:[],teachers:[]}},computed:{dateRangeText:{get:function(){return this.dates.join("/")},set:function(){this.dates.join("/")}}},mounted:function(){this.getFinancialDetails(),this.getTeachers(),this.getSubjects()},methods:{getFinancialDetails:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$nuxt.$loading.start(),e.prev=1,e.next=4,t.$axios.get("financialDetails");case 4:n=e.sent,t.financialDetails=n.data,console.log(n.data),t.$nuxt.$loading.finish(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.response),t.$nuxt.$loading.finish();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},filterFinancialDetails:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data,r,l,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$nuxt.$loading.start(),data=Object.fromEntries(new FormData(t.target)),r={},data.dates&&(r.dates=data.dates.toString()),data.subjectId&&(r.subjectId=data.subjectId),data.createdBy&&(r.createdBy=data.createdBy),l=Object.keys(r).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])})).join("&"),n.prev=7,n.next=10,e.$axios.get("financialDetails?".concat(l));case 10:o=n.sent,e.financialDetails=o.data,e.$nuxt.$loading.finish(),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(7),console.error(n.t0.response),e.$nuxt.$loading.finish();case 19:case"end":return n.stop()}}),n,null,[[7,15]])})))()},getTeachers:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$nuxt.$loading.start(),e.prev=1,e.next=4,t.$axios.get("userRoles/3");case 4:n=e.sent,t.teachers=n.data,t.$nuxt.$loading.finish(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),t.$nuxt.$loading.finish();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},getSubjects:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$nuxt.$loading.start(),e.prev=1,e.next=4,t.$axios.get("subjects");case 4:n=e.sent,t.subjects=n.data,t.$nuxt.$loading.finish(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),t.$nuxt.$loading.finish();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},openDetailsPage:function(t,e){var n=e.item.idCourse;this.$router.push({path:"reports/".concat(n),query:{p:e.item.platformPriceTotal,r:e.item.remainingPrice}})}}}),o=n(42),c=n(66),d=n.n(c),v=n(439),f=n(479),m=n(451),x=n(707),h=n(705),w=n(484),$=n(192),j=n(292),k=n(440),y=n(453),_=n(653),R=n(449),D=n(458),C=n(441),T=n(435),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reports-page"},[n("v-card",{staticClass:"shadow-1 radius-1 pa-5 mb-10",attrs:{color:"secondary"}},[n("v-form",{ref:"filterFormRef",on:{submit:function(e){return e.preventDefault(),t.filterFinancialDetails.apply(null,arguments)}}},[n("v-row",{staticClass:"align-center justify-space-between"},[n("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dateRangeText,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.dateRangeText=e},"update:return-value":function(e){t.dateRangeText=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:"التاريخ (من و الى)","prepend-inner-icon":"mdi-calendar",readonly:"",color:"text",outlined:"",name:"dates","hide-details":"",clearable:""},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},"v-text-field",l,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{attrs:{range:"","no-title":"",scrollable:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"text"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"text"},on:{click:function(e){return t.$refs.menu.save(t.dates)}}},[t._v("\n                OK\n              ")])],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[n("v-select",{attrs:{items:t.teachers,"item-color":"text",color:"text",label:"الاساتذة","item-value":"idUser","item-text":"userName",name:"createdBy",outlined:"",clearable:"","hide-details":""}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[n("v-select",{attrs:{items:t.subjects,"item-color":"text",color:"text",label:"المادة",outlined:"","item-value":"idSubject","item-text":"subjectName",name:"subjectId",clearable:"","hide-details":""}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[n("v-btn",{staticClass:"secondary--text shadow-1",attrs:{color:"info",type:"submit"}},[n("v-icon",{staticClass:"ml-2"},[t._v("search")]),t._v(" "),n("span",[t._v("بحث")])],1),t._v(" "),n("v-btn",{staticClass:"secondary--text shadow-1",attrs:{color:"info"},on:{click:t.getFinancialDetails}},[n("v-icon",{staticClass:"ml-2"},[t._v("refresh")]),t._v(" "),n("span",[t._v("اعادة تعين")])],1)],1)],1)],1)],1),t._v(" "),n("v-data-table",{staticClass:"shadow-1 radius-1 pa-5 secondary",attrs:{headers:t.headers,items:t.financialDetails,"items-per-page":15,"loading-text":"جاري التحميل",search:t.search},on:{"dblclick:row":t.openDetailsPage},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"shadow-1 radius-1",attrs:{flat:"",color:"primary"}},[n("div",{staticClass:"d-flex align-center justify-evenly",staticStyle:{width:"100%"}},[n("v-toolbar-title",{staticStyle:{flex:"1 1 auto"}},[t._v("التقارير المالية")]),t._v(" "),n("v-text-field",{staticStyle:{flex:"1 1 auto"},attrs:{color:"text",placeholder:"ابحث في التقارير...",outlined:"","hide-details":"",dense:"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])]},proxy:!0},{key:"item.coursePath",fn:function(e){var r=e.item;return[n("v-img",{attrs:{src:t.$axios.defaults.baseURL+r.coursePath,"max-width":"40px","max-height":"40px"}})]}}],null,!0)})],1)}),[],!1,null,null,null);e.default=component.exports;d()(component,{VBtn:v.a,VCard:f.a,VCol:m.a,VDataTable:x.a,VDatePicker:h.a,VForm:w.a,VIcon:$.a,VImg:j.a,VMenu:k.a,VRow:y.a,VSelect:_.a,VSpacer:R.a,VTextField:D.a,VToolbar:C.a,VToolbarTitle:T.a})}}]);