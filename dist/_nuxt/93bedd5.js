(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{724:function(e,t,r){"use strict";r.r(t);var n=r(29),l=(r(108),r(88),r(494),r(18),r(68),r(72),r(6),{data:function(){return{dates:[],menu:!1,filterFormModel:!1,search:"",headers:[{text:"المعرف",value:"idCourse",sortable:!0,align:"start",width:200},{text:"الصورة",value:"coursePath",sortable:!0,align:"start",width:200},{text:"عنوان الكورس",value:"courseTitle",sortable:!0,align:"start",width:200},{text:"وصف الكورس",value:"courseDescription",sortable:!0,align:"start",width:200},{text:"سعر الكورس",value:"coursePrice",sortable:!0,align:"start",width:200},{text:"المادة",value:"subject.subjectName",sortable:!0,align:"start",width:200},{text:"الصف",value:"class.className",sortable:!0,align:"start",width:200},{text:"التقيم",value:"courseRate",sortable:!0,align:"start",width:200},{text:"سعر المنصة",value:"platformPrice",sortable:!0,align:"start",width:200},{text:"السعر الكلي",value:"totalPrice",sortable:!0,align:"start",width:200},{text:"السعر المتبقي",value:"remainingPrice",sortable:!0,align:"start",width:200},{text:"المسجلين",value:"EnrolledStudents",sortable:!0,align:"start",width:200},{text:"قيد الانتضار",value:"PendingStudents",sortable:!0,align:"start",width:200},{text:"المقبولين",value:"ActiveStudents",sortable:!0,align:"start",width:200},{text:"رقم هاتف الاستاذ",value:"user.phone",sortable:!0,align:"start",width:200}],financialDetails:[],subjects:[],teachers:[]}},computed:{dateRangeText:{get:function(){return this.dates.join("/")},set:function(){this.dates.join("/")}}},mounted:function(){this.getFinancialDetails(),this.getTeachers(),this.getSubjects()},methods:{getFinancialDetails:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("financialDetails");case 3:r=t.sent,e.financialDetails=r.data,console.log(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},filterFinancialDetails:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data,n,l,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return data=Object.fromEntries(new FormData(e.target)),n={},data.dates&&(n.dates=data.dates.toString()),data.subjectId&&(n.subjectId=data.subjectId),data.createdBy&&(n.createdBy=data.createdBy),l=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&"),r.prev=6,r.next=9,t.$axios.get("financialDetails?".concat(l));case 9:o=r.sent,t.financialDetails=o.data,r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),console.error(r.t0.response);case 16:case"end":return r.stop()}}),r,null,[[6,13]])})))()},getTeachers:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("userRoles/3");case 3:r=t.sent,e.teachers=r.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getSubjects:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("subjects");case 3:r=t.sent,e.subjects=r.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},openDetailsPage:function(e,t){var r=t.item.idCourse;this.$router.push({path:"reports/".concat(r),query:{p:t.item.platformPriceTotal,r:t.item.remainingPrice}})}}}),o=r(43),c=r(67),d=r.n(c),v=r(448),m=r(447),f=r(461),x=r(714),h=r(712),w=r(472),j=r(198),k=r(296),y=r(451),_=r(463),R=r(661),D=r(459),C=r(468),T=r(449),V=r(444),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reports-page"},[r("v-card",{staticClass:"shadow-1 radius-1 pa-5 mb-10",attrs:{color:"secondary"}},[r("v-form",{ref:"filterFormRef",on:{submit:function(t){return t.preventDefault(),e.filterFinancialDetails.apply(null,arguments)}}},[r("v-row",{staticClass:"align-center justify-space-between"},[r("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.dateRangeText,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.dateRangeText=t},"update:return-value":function(t){e.dateRangeText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,l=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"التاريخ (من و الى)","prepend-inner-icon":"mdi-calendar",readonly:"",color:"text",outlined:"",name:"dates","hide-details":"",clearable:""},model:{value:e.dateRangeText,callback:function(t){e.dateRangeText=t},expression:"dateRangeText"}},"v-text-field",l,!1),n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),r("v-date-picker",{attrs:{range:"","no-title":"",scrollable:""},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{text:"",color:"text"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),e._v(" "),r("v-btn",{attrs:{text:"",color:"text"},on:{click:function(t){return e.$refs.menu.save(e.dates)}}},[e._v("\n                OK\n              ")])],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[r("v-select",{attrs:{items:e.teachers,"item-color":"text",color:"text",label:"الاساتذة","item-value":"idUser","item-text":"userName",name:"createdBy",outlined:"",clearable:"","hide-details":""}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[r("v-select",{attrs:{items:e.subjects,"item-color":"text",color:"text",label:"المادة",outlined:"","item-value":"idSubject","item-text":"subjectName",name:"subjectId",clearable:"","hide-details":""}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"3",xl:"3"}},[r("v-btn",{staticClass:"secondary--text shadow-1",attrs:{color:"info",type:"submit"}},[r("v-icon",{staticClass:"ml-2"},[e._v("search")]),e._v(" "),r("span",[e._v("بحث")])],1),e._v(" "),r("v-btn",{staticClass:"secondary--text shadow-1",attrs:{color:"info"},on:{click:e.getFinancialDetails}},[r("v-icon",{staticClass:"ml-2"},[e._v("refresh")]),e._v(" "),r("span",[e._v("اعادة تعين")])],1)],1)],1)],1)],1),e._v(" "),r("v-data-table",{staticClass:"shadow-1 radius-1 pa-5 secondary",attrs:{headers:e.headers,items:e.financialDetails,"items-per-page":15,"loading-text":"جاري التحميل",search:e.search},on:{"dblclick:row":e.openDetailsPage},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{staticClass:"shadow-1 radius-1",attrs:{flat:"",color:"primary"}},[r("div",{staticClass:"d-flex align-center justify-evenly",staticStyle:{width:"100%"}},[r("v-toolbar-title",{staticStyle:{flex:"1 1 auto"}},[e._v("التقارير المالية")]),e._v(" "),r("v-text-field",{staticStyle:{flex:"1 1 auto"},attrs:{color:"text",placeholder:"ابحث في التقارير...",outlined:"","hide-details":"",dense:"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)])]},proxy:!0},{key:"item.coursePath",fn:function(t){var n=t.item;return[r("v-img",{attrs:{src:e.$axios.defaults.baseURL+n.coursePath,"max-width":"40px","max-height":"40px"}})]}}],null,!0)})],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:v.a,VCard:m.a,VCol:f.a,VDataTable:x.a,VDatePicker:h.a,VForm:w.a,VIcon:j.a,VImg:k.a,VMenu:y.a,VRow:_.a,VSelect:R.a,VSpacer:D.a,VTextField:C.a,VToolbar:T.a,VToolbarTitle:V.a})}}]);