(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{740:function(e,t,l){"use strict";l.r(t);var r=l(28),n=(l(105),{data:function(){return{createForm:!1,updateForm:!1,search:"",createGradeDialog:!1,updateClassDialog:!1,isImageChanged:!1,rules:[function(e){return!!e||"لا يمكن ترك الحقل فارغ"}],className:null,classImage:null,tempClassImage:null,classId:null,classes:[],headers:[{text:"#",value:"idClass",sortable:!0,align:"start"},{text:"صورة الصف",value:"classImage"},{text:"اسم الصف",value:"className"},{text:"الاجرائات",value:"actions"}]}},head:function(){return{title:"المراحل"}},mounted:function(){this.GetClasses()},methods:{saveImage:function(e){this.tempClassImage=e},saveUpdateImage:function(e){this.tempClassImage=e,this.isImageChanged=!0},GetClasses:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("classes");case 3:l=t.sent,e.classes=l.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},openUpdateDialog:function(e){this.updateClassDialog=!0,this.className=e.className,this.classId=e.idClass,this.classImage=e.classImage},closeUpdateDialog:function(){this.updateClassDialog=!1,this.className=null,this.classId=null,this.classImage=null},deleteItem:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(t.$nuxt.$loading.start(),l.prev=1,!confirm("هل تريد حذف الصف")){l.next=9;break}return l.next=5,t.$axios.delete("class/".concat(e.idClass));case 5:l.sent,t.$toast.success("تم حذف الصف",{duration:3e3,position:"top-center"}),t.GetClasses(),t.$nuxt.$loading.finish();case 9:l.next=15;break;case 11:l.prev=11,l.t0=l.catch(1),t.$nuxt.$loading.finish(),console.log(l.t0.response);case 15:case"end":return l.stop()}}),l,null,[[1,11]])})))()},updateGrades:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var form,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$nuxt.$loading.start(),t.prev=1,!e.isImageChanged){t.next=9;break}return(form=new FormData).append("attachment",e.tempClassImage),t.next=7,e.$axios.post("upload",form);case 7:l=t.sent,e.classImage=l.data.imagePath;case 9:return t.next=11,e.$axios.put("class/".concat(e.classId),{className:e.className,classImage:e.classImage});case 11:t.sent,e.$toast.success("تم حفظ المعلومات",{duration:3e3,position:"top-center"}),e.GetClasses(),e.closeUpdateDialog(),e.$nuxt.$loading.finish(),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(1),e.$nuxt.$loading.finish(),console.log(t.t0.response);case 22:case"end":return t.stop()}}),t,null,[[1,18]])})))()},createGrades:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var form,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$nuxt.$loading.start(),(form=new FormData).append("attachment",e.tempClassImage),t.prev=3,t.next=6,e.$axios.post("upload",form);case 6:return l=t.sent,e.classImage=l.data.imagePath,t.next=10,e.$axios.post("addClass",{className:e.className,classImage:e.classImage});case 10:t.sent,e.$toast.success("تم حفظ المعلومات",{duration:3e3,position:"top-center"}),e.GetClasses(),e.closeUpdateDialog(),e.createGradeDialog=!1,e.$nuxt.$loading.finish(),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),e.$nuxt.$loading.finish(),console.log(t.t0.response);case 22:case"end":return t.stop()}}),t,null,[[3,18]])})))()}}}),o=l(41),c=l(57),d=l.n(c),m=l(449),v=l(450),f=l(460),x=l(733),h=l(484),I=l(488),y=l(475),C=l(197),k=l(295),_=l(462),w=l(458),$=l(469),D=l(451),G=l(443),F=l(482),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"subjects-page"},[l("v-dialog",{attrs:{persistent:"","max-width":"750px",transition:"slide-y-transition"},model:{value:e.createGradeDialog,callback:function(t){e.createGradeDialog=t},expression:"createGradeDialog"}},[l("v-card",{staticClass:"shadow-1 radius-1 pa-10",attrs:{color:"secondary"}},[l("v-toolbar",{staticClass:"shadow-1 radius-1 mb-10",attrs:{flat:"",color:"primary"}},[l("div",{staticClass:"d-flex align-center justify-evenly",staticStyle:{width:"100%"}},[l("v-toolbar-title",{staticStyle:{flex:"1 1 auto"}},[e._v("اضافة مراحل")]),e._v(" "),l("v-spacer"),e._v(" "),l("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(t){e.createGradeDialog=!1}}},[l("v-icon",[e._v("close")])],1)],1)]),e._v(" "),l("v-form",{ref:"createRef",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.createGrades.apply(null,arguments)}},model:{value:e.createForm,callback:function(t){e.createForm=t},expression:"createForm"}},[l("v-row",[l("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"}},[l("v-text-field",{attrs:{outlined:"",label:"اسم الصف",color:"text",type:"text",rules:e.rules},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}})],1),e._v(" "),l("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"}},[l("v-file-input",{attrs:{outlined:"",label:"الصورة",color:"text",rules:e.rules},on:{change:e.saveImage},model:{value:e.classImage,callback:function(t){e.classImage=t},expression:"classImage"}})],1)],1),e._v(" "),l("v-btn",{staticClass:"mt-10",attrs:{block:"",color:"success",large:"",depressed:"",disabled:!e.createForm,type:"submit"}},[e._v("\n          حفظ المعلومات\n        ")])],1)],1)],1),e._v(" "),l("v-dialog",{attrs:{persistent:"","max-width":"750px",transition:"slide-y-transition"},model:{value:e.updateClassDialog,callback:function(t){e.updateClassDialog=t},expression:"updateClassDialog"}},[l("v-card",{staticClass:"shadow-1 radius-1 pa-10",attrs:{color:"secondary"}},[l("v-toolbar",{staticClass:"shadow-1 radius-1 mb-10",attrs:{flat:"",color:"primary"}},[l("div",{staticClass:"d-flex align-center justify-evenly",staticStyle:{width:"100%"}},[l("v-toolbar-title",{staticStyle:{flex:"1 1 auto"}},[e._v("تحديث الصفوف")]),e._v(" "),l("v-spacer"),e._v(" "),l("v-btn",{attrs:{icon:"",color:"error"},on:{click:e.closeUpdateDialog}},[l("v-icon",[e._v("close")])],1)],1)]),e._v(" "),l("v-form",{ref:"createRef",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.updateGrades.apply(null,arguments)}},model:{value:e.updateForm,callback:function(t){e.updateForm=t},expression:"updateForm"}},[l("v-row",[l("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[l("v-text-field",{attrs:{outlined:"",label:"اسم الصف",color:"text",type:"text",rules:e.rules},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}})],1),e._v(" "),l("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[l("v-file-input",{attrs:{outlined:"",label:"الصورة",color:"text",rules:e.rules},on:{change:e.saveUpdateImage},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[l("v-img",{attrs:{src:e.$axios.defaults.baseURL+e.classImage,width:"30px",height:"30px"}})]},proxy:!0}]),model:{value:e.classImage,callback:function(t){e.classImage=t},expression:"classImage"}})],1)],1),e._v(" "),l("v-btn",{staticClass:"mt-10",attrs:{block:"",color:"success",large:"",depressed:"",disabled:!e.updateForm,type:"submit"}},[e._v("\n          حفظ المعلومات\n        ")])],1)],1)],1),e._v(" "),l("v-data-table",{staticClass:"shadow-1 radius-1 pa-5 secondary",attrs:{headers:e.headers,items:e.classes,"items-per-page":15,"item-key":"courseId",search:e.search},on:{"update:items":function(t){e.classes=t}},scopedSlots:e._u([{key:"top",fn:function(){return[l("v-toolbar",{staticClass:"shadow-1 radius-1",attrs:{flat:"",color:"primary"}},[l("div",{staticClass:"d-flex align-center justify-evenly",staticStyle:{width:"100%"}},[l("v-toolbar-title",{staticStyle:{flex:"1 1 auto"}},[e._v("الصفوف")]),e._v(" "),l("v-text-field",{staticStyle:{flex:"1 1 auto"},attrs:{color:"text",placeholder:"ابحث في الصفوف...",outlined:"","hide-details":"",dense:"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),l("v-tooltip",{attrs:{bottom:"",transition:"slide-y-transition",color:"text"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[l("v-btn",e._g(e._b({staticClass:"mr-10",attrs:{icon:"",color:"text"},on:{click:function(t){e.createGradeDialog=!0}}},"v-btn",n,!1),r),[l("v-icon",[e._v("add")])],1)]}}])},[e._v(" "),l("span",{staticClass:"primary--text"},[e._v("اضافة صف")])])],1)])]},proxy:!0},{key:"item.classImage",fn:function(t){var r=t.item;return[l("v-img",{attrs:{src:e.$axios.defaults.baseURL+r.classImage,"max-width":"50px",height:"50px"}})]}},{key:"item.actions",fn:function(t){var r=t.item;return[l("v-btn",{attrs:{color:"warning",icon:""},on:{click:function(t){return e.openUpdateDialog(r)}}},[l("v-icon",[e._v("edit")])],1),e._v(" "),l("v-btn",{attrs:{color:"error",icon:""},on:{click:function(t){return e.deleteItem(r)}}},[l("v-icon",[e._v("delete")])],1)]}}],null,!0)})],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:m.a,VCard:v.a,VCol:f.a,VDataTable:x.a,VDialog:h.a,VFileInput:I.a,VForm:y.a,VIcon:C.a,VImg:k.a,VRow:_.a,VSpacer:w.a,VTextField:$.a,VToolbar:D.a,VToolbarTitle:G.a,VTooltip:F.a})}}]);